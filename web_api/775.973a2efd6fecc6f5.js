"use strict";(self.webpackChunkice_web=self.webpackChunkice_web||[]).push([[775],{7775:(H,u,l)=>{l.r(u),l.d(u,{AddCampaignModule:()=>S});var c=l(5702),g=l(7537),m=l(6019),A=l(4330),C=l(8239),Z=l(9660),h=l.n(Z),f=(l(6795),l(8260)),e=l(3556),T=l(2387),v=l(2970),q=l(5117),y=l(821);function N(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function M(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function x(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function L(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function G(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function J(t,s){if(1&t&&(e.TgZ(0,"span"),e._UZ(1,"img",40),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.s9C("src",a.image,e.LSH)}}function b(t,s){if(1&t&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function O(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function I(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function U(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function w(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function Q(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function k(t,s){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",42),e.TgZ(2,"span"),e.TgZ(3,"input",43),e.NdJ("change",function(o){const r=e.CHM(a).$implicit;return e.oxw().changeImage(o,r)}),e.qZA(),e._UZ(4,"img",44),e.qZA(),e.TgZ(5,"div"),e.TgZ(6,"button",45),e.NdJ("click",function(){const i=e.CHM(a).index;return e.oxw().showFileInput("file_type"+i)}),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"small"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",46),e.TgZ(12,"div",8),e.TgZ(13,"input",47),e.NdJ("ngModelChange",function(o){return e.CHM(a).$implicit.name=o}),e.qZA(),e.YNc(14,w,2,1,"span",7),e.qZA(),e.TgZ(15,"div",8),e.TgZ(16,"input",47),e.NdJ("ngModelChange",function(o){return e.CHM(a).$implicit.designation=o}),e.qZA(),e.YNc(17,Q,2,1,"span",7),e.qZA(),e.qZA(),e.BQk()}if(2&t){const a=s.$implicit,n=s.index,o=e.oxw();e.xp6(3),e.MGl("id","file_type",n,""),e.xp6(1),e.Q6J("src",a.image?a.image:"assets/images/gallery.svg",e.LSH),e.xp6(4),e.Oqu(o.LANG.UPLOAD_DP),e.xp6(2),e.Oqu(o.LANG.Supported_Format),e.xp6(3),e.s9C("placeholder",o.LANG.Employee_name),e.MGl("name","employee_name",n,""),e.Q6J("ngModel",a.name),e.xp6(1),e.Q6J("ngIf",null==a?null:a.name_error),e.xp6(2),e.s9C("placeholder",o.LANG.Designation),e.MGl("name","employee_designation",n,""),e.Q6J("ngModel",a.designation),e.xp6(1),e.Q6J("ngIf",null==a?null:a.designation_error)}}function Y(t,s){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Oqu(a.LANG.This_field_is_required)}}function F(t,s){1&t&&(e.ynx(0),e._UZ(1,"loader"),e.BQk())}function j(t,s){if(1&t&&e._uU(0),2&t){const a=e.oxw();e.hij(" ",a.LANG.SUBMIT_START_OPPORTUNITY," ")}}const E=[{path:"add-campaign",component:(()=>{class t{constructor(a,n,o,i){this.toast=a,this.campaign_service=n,this.router=o,this.shared=i,this.err=!1,this.load=!1,this.campaign_details={introduce_team:"1"},this.errors={},this.initialTeam={name:"",designation:"",image:""},this.teams=[Object.assign({},this.initialTeam)],this.campaign_images=[],this.campaign_images_files=[],this.image_count=0,this.uploaded_count=0,this.upload_called=!1,this.subscriptions=[],this.LANG={},this.subscriptions.push(this.shared.languageChange.subscribe(r=>{this.changeLanguage()})),this.changeLanguage()}ngOnInit(){}addEmployees(){this.teams.push(Object.assign({},this.initialTeam))}changeLanguage(){this.LANG="true"==localStorage.getItem("arabic")&&null!=localStorage.getItem("arabic")?f.N.arabic_translations:f.N.english_translations}showFileInput(a){document.getElementById(a).click()}addCampaign(){this.err=!1,this.errors={},this.errorHandler(),!this.err&&(this.load=!0,this.campaign_images.length>0&&this.campaign_images.map(a=>{a.file&&(this.uploadImage(a),this.image_count+=1)}),!this.err&&!this.upload_called&&this.add())}errorHandler(){(""==this.campaign_details.tagline||null==this.campaign_details.tagline)&&(this.errors.tagline=!0,this.err=!0),(""==this.campaign_details.share_price||null==this.campaign_details.share_price)&&(this.errors.share_price=!0,this.err=!0),(""==this.campaign_details.total_valuation||null==this.campaign_details.total_valuation)&&(this.errors.total_valuation=!0,this.err=!0),(""==this.campaign_details.min_investment||null==this.campaign_details.min_investment)&&(this.errors.min_investment=!0,this.err=!0),(""==this.campaign_details.max_investment||null==this.campaign_details.max_investment)&&(this.errors.max_investment=!0,this.err=!0),(""==this.campaign_details.company_bio||null==this.campaign_details.company_bio)&&(this.errors.company_bio=!0,this.err=!0),(""==this.campaign_details.reason_to_invest||null==this.campaign_details.reason_to_invest)&&(this.errors.reason_to_invest=!0,this.err=!0),(""==this.campaign_details.investment_planning||null==this.campaign_details.investment_planning)&&(this.errors.investment_planning=!0,this.err=!0),(""==this.campaign_details.terms||null==this.campaign_details.terms)&&(this.errors.terms=!0,this.err=!0),0==this.campaign_images.length&&(this.errors.campaign_image_error=!0,this.err=!0),this.teamsErrors()}teamsErrors(){this.teams.map(a=>{""==a.name||null==a.name?(a.name_error=!0,this.err=!0):a.name_error=!1,""==a.designation||null==a.designation?(a.designation_error=!0,this.err=!0):a.designation_error=!1,!this.err&&a.file&&(this.image_count+=1,this.uploadImage(a))})}changeImage(a,n){let o=a.target.files[0],i=o.type.split("/").pop().toLowerCase();if("jpeg"!==i&&"jpg"!==i&&"png"!==i)return this.toast.warning("",o.name+"is not a valid file"),!1;if(o){let r=new FileReader;r.onload=p=>{n.image=p.target.result,n.file=o},r.readAsDataURL(o)}}changeImageFile(a){let n=a.target.files,o=n.length+this.campaign_images.length;if(n.length>3)return this.toast.warning("Cannot Add more than 3 Images."),!1;if(o>3)return this.toast.warning("Cannot Add more than 3 Images."),!1;if(n)for(let i=0;i<n.length;i++){let r=n[i].type.split("/").pop().toLowerCase();if("jpeg"!==r&&"jpg"!==r&&"png"!==r&&"pdf"!==r){this.toast.warning(n[i].name+" is not a valid File!");continue}let p=new FileReader;p.onload=_=>{this.campaign_images.push({image:_.target.result,file:n[i],extension:r})},p.readAsDataURL(n[i]),this.errors.campaign_image_error=!1}}uploadImage(a){var n=this;this.load=!0,this.upload_called=!0;var o=Date.now();const p=`Kyc/${a.file.name+o}`;this.load=!0;const _=h().storage().ref().child(`${p}`).put(a.file);_.on(h().storage.TaskEvent.STATE_CHANGED,d=>{a.progress=d.bytesTransferred/d.totalBytes*100},d=>console.log(d),(0,C.Z)(function*(){yield _.snapshot.ref.getDownloadURL().then(d=>{a.image=d,n.uploaded_count+=1,n.image_count==n.uploaded_count&&n.add()})}))}add(){this.subscriptions.push(this.campaign_service.addCampaign({tagline:this.campaign_details.tagline,share_price:this.campaign_details.share_price,total_valuation:this.campaign_details.total_valuation,min_investment:this.campaign_details.min_investment,max_investment:this.campaign_details.max_investment,campaign_images:this.campaign_images,team:this.teams,company_bio:this.campaign_details.company_bio,reason_to_invest:this.campaign_details.reason_to_invest,investment_planning:this.campaign_details.investment_planning,terms:this.campaign_details.terms,introduce_team:this.campaign_details.introduce_team}).subscribe(n=>{if(this.load=!1,n.status)return this.toast.success("Campaign added successfully!"),void this.router.navigate(["/thank-you"]);this.toast.warning(n.response.message)}))}onlyNumbers(a){var n=a.which?a.which:a.keyCode;if((n<48||n>57)&&13!==n||46==n)return a.preventDefault(),!1}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(T._W),e.Y36(v.U),e.Y36(c.F0),e.Y36(q.F))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:78,vars:50,consts:[[1,"container-fluid","campaign"],[1,"container"],[1,"container","bg-white","border-sec"],[1,"upload-sec"],[1,"row","campaign-row"],[1,"form-group","col-md-12"],["type","text","name","tagline",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","error",4,"ngIf"],[1,"form-group","col-md-6"],["type","text","name","share_price",1,"form-control",3,"placeholder","ngModel","ngModelChange","keypress"],["type","text","name","total_valuation",1,"form-control",3,"placeholder","ngModel","ngModelChange","keypress"],["type","text","name","min_investment",1,"form-control",3,"placeholder","ngModel","ngModelChange","keypress"],["type","text","name","max_investment",1,"form-control",3,"placeholder","ngModel","ngModelChange","keypress"],[1,"add-image"],["type","file","id","file_type_campaign","multiple","",2,"display","none",3,"change"],[4,"ngFor","ngForOf"],[3,"click"],[1,"fa","fa-plus"],["class","error mt-2 mb-5",4,"ngIf"],["type","text","name","",1,"form-control",3,"placeholder"],["type","text","name","company_bio",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["name","reason_to_invest",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["name","investment_planning",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"form-check"],[1,"radio-1"],["type","radio","id","yes","name","introduce_team","value","1",1,"radio-buttons",3,"ngModel","ngModelChange"],["name","introduce_team","for","yes"],[1,"radio-2"],["type","radio","id","no","name","introduce_team","value","2",1,"radio-buttons",3,"ngModel","ngModelChange"],["name","introduce_team","for","no"],[1,"border-bot"],[1,"add-member",3,"click"],[1,"form-group","col-md-12","camp-text"],["name","terms",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"row","camp-button","justify-content-center"],[1,"col-md-6","submit-button","text-center"],[1,"btn",3,"click"],[4,"ngIf","ngIfElse"],["noLoader",""],[1,"error"],[1,"",3,"src"],[1,"error","mt-2","mb-5"],[1,"upload-logo"],["type","file",2,"display","none",3,"id","change"],[1,"employee-img",3,"src"],[1,"btn","head-button-wrap","start",3,"click"],[1,"row"],["type","text",1,"form-control",3,"placeholder","name","ngModel","ngModelChange"]],template:function(a,n){if(1&a&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h5"),e._uU(5),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(i){return n.campaign_details.tagline=i}),e.qZA(),e.YNc(9,N,2,1,"span",7),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(i){return n.campaign_details.share_price=i})("keypress",function(i){return n.onlyNumbers(i)}),e.qZA(),e.YNc(12,M,2,1,"span",7),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(i){return n.campaign_details.total_valuation=i})("keypress",function(i){return n.onlyNumbers(i)}),e.qZA(),e.YNc(15,x,2,1,"span",7),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"input",11),e.NdJ("ngModelChange",function(i){return n.campaign_details.min_investment=i})("keypress",function(i){return n.onlyNumbers(i)}),e.qZA(),e.YNc(18,L,2,1,"span",7),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"input",12),e.NdJ("ngModelChange",function(i){return n.campaign_details.max_investment=i})("keypress",function(i){return n.onlyNumbers(i)}),e.qZA(),e.YNc(21,G,2,1,"span",7),e.qZA(),e.qZA(),e.TgZ(22,"h5"),e._uU(23),e.qZA(),e.TgZ(24,"small"),e._uU(25),e.qZA(),e.TgZ(26,"div",13),e.TgZ(27,"input",14),e.NdJ("change",function(i){return n.changeImageFile(i)}),e.qZA(),e.YNc(28,J,2,1,"span",15),e.TgZ(29,"span",16),e.NdJ("click",function(){return n.showFileInput("file_type_campaign")}),e._UZ(30,"i",17),e._uU(31),e.qZA(),e.qZA(),e.YNc(32,b,2,1,"span",18),e.TgZ(33,"h5"),e._uU(34),e.qZA(),e.TgZ(35,"div",4),e.TgZ(36,"div",5),e._UZ(37,"input",19),e.qZA(),e.qZA(),e.TgZ(38,"h5"),e._uU(39),e.qZA(),e.TgZ(40,"div",4),e.TgZ(41,"div",5),e.TgZ(42,"input",20),e.NdJ("ngModelChange",function(i){return n.campaign_details.company_bio=i}),e.qZA(),e.YNc(43,O,2,1,"span",7),e.qZA(),e.TgZ(44,"div",5),e.TgZ(45,"textarea",21),e.NdJ("ngModelChange",function(i){return n.campaign_details.reason_to_invest=i}),e.qZA(),e.YNc(46,I,2,1,"span",7),e.qZA(),e.TgZ(47,"div",5),e.TgZ(48,"textarea",22),e.NdJ("ngModelChange",function(i){return n.campaign_details.investment_planning=i}),e.qZA(),e.YNc(49,U,2,1,"span",7),e.qZA(),e.qZA(),e.TgZ(50,"h5"),e._uU(51),e.qZA(),e.TgZ(52,"div",4),e.TgZ(53,"div",23),e.TgZ(54,"div",24),e.TgZ(55,"input",25),e.NdJ("ngModelChange",function(i){return n.campaign_details.introduce_team=i}),e.qZA(),e.TgZ(56,"label",26),e._uU(57),e.qZA(),e.qZA(),e.TgZ(58,"div",27),e.TgZ(59,"input",28),e.NdJ("ngModelChange",function(i){return n.campaign_details.introduce_team=i}),e.qZA(),e.TgZ(60,"label",29),e._uU(61),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(62,k,18,12,"ng-container",15),e.TgZ(63,"div",30),e.TgZ(64,"a",31),e.NdJ("click",function(){return n.addEmployees()}),e._uU(65),e.qZA(),e.qZA(),e.TgZ(66,"h5"),e._uU(67),e.qZA(),e.TgZ(68,"div",4),e.TgZ(69,"div",32),e.TgZ(70,"textarea",33),e.NdJ("ngModelChange",function(i){return n.campaign_details.terms=i}),e.qZA(),e.YNc(71,Y,2,1,"span",7),e.qZA(),e.qZA(),e.TgZ(72,"div",34),e.TgZ(73,"div",35),e.TgZ(74,"button",36),e.NdJ("click",function(){return n.addCampaign()}),e.YNc(75,F,2,0,"ng-container",37),e.YNc(76,j,1,1,"ng-template",null,38,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const o=e.MAs(77);e.xp6(5),e.Oqu(n.LANG.Opportunity_details),e.xp6(3),e.MGl("placeholder","",n.LANG.Company_tagline_Slogan," *"),e.Q6J("ngModel",n.campaign_details.tagline),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.tagline),e.xp6(2),e.MGl("placeholder","",n.LANG.Companys_share_price," *"),e.Q6J("ngModel",n.campaign_details.share_price),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.share_price),e.xp6(2),e.MGl("placeholder","",n.LANG.Total_Valuation," *"),e.Q6J("ngModel",n.campaign_details.total_valuation),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.total_valuation),e.xp6(2),e.MGl("placeholder","",n.LANG.Min_Investment_per_investor," *"),e.Q6J("ngModel",n.campaign_details.min_investment),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.min_investment),e.xp6(2),e.MGl("placeholder","",n.LANG.Max_Investment_per_investor," *"),e.Q6J("ngModel",n.campaign_details.max_investment),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.max_investment),e.xp6(2),e.Oqu(n.LANG.Upload_pictures_for_the_Opportunity),e.xp6(2),e.Oqu(n.LANG.Supported_Format),e.xp6(1),e.ekj("mb-0",null==n.errors?null:n.errors.campaign_image_error),e.xp6(2),e.Q6J("ngForOf",n.campaign_images),e.xp6(3),e.Oqu(n.LANG.Add_image),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.campaign_image_error),e.xp6(2),e.Oqu(n.LANG.Fundraise_Opportunity_details),e.xp6(3),e.s9C("placeholder",n.LANG.How_much_amount_you_are_expecting_to_raise),e.xp6(2),e.Oqu(n.LANG.About_company),e.xp6(3),e.s9C("placeholder",n.LANG.Write_Short_Bio_about_your_company),e.Q6J("ngModel",n.campaign_details.company_bio),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.company_bio),e.xp6(2),e.s9C("placeholder",n.LANG.Reason_to_invest),e.Q6J("ngModel",n.campaign_details.reason_to_invest),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.reason_to_invest),e.xp6(2),e.s9C("placeholder",n.LANG.Where_are_you_planning_to_allocate_the_funds),e.Q6J("ngModel",n.campaign_details.investment_planning),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.investment_planning),e.xp6(2),e.Oqu(n.LANG.Do_you_want_to_introduce_your_team),e.xp6(4),e.Q6J("ngModel",n.campaign_details.introduce_team),e.xp6(2),e.Oqu(n.LANG.Yes),e.xp6(2),e.Q6J("ngModel",n.campaign_details.introduce_team),e.xp6(2),e.Oqu(n.LANG.No),e.xp6(1),e.Q6J("ngForOf",n.teams),e.xp6(3),e.hij("+ ",n.LANG.add_more_team_member,""),e.xp6(2),e.Oqu(n.LANG.Terms_Conditions),e.xp6(3),e.s9C("placeholder",n.LANG.Write_your_Terms_Conditions_here),e.Q6J("ngModel",n.campaign_details.terms),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.terms),e.xp6(3),e.ekj("loading",n.load),e.xp6(1),e.Q6J("ngIf",n.load)("ngIfElse",o)}},directives:[g.Fj,g.JJ,g.On,m.O5,m.sg,g._,y.R],styles:[".upload-sec[_ngcontent-%COMP%]{margin-bottom:20px}.employee-img[_ngcontent-%COMP%]{width:99px;height:99px;border-radius:50%}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(E),g.u5,m.ez,A.q]]}),t})()}}]);