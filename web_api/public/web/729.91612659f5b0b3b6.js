"use strict";(self.webpackChunkice_web=self.webpackChunkice_web||[]).push([[729],{3729:(An,f,s)=>{s.r(f),s.d(f,{AddKYCModule:()=>yn});var u=s(5702),g=s(7537),m=s(6019),C=s(4330),y=s(8239),p=(()=>{return(e=p||(p={}))[e.Characters=1]="Characters",e[e.Email=2]="Email",e[e.Textarea=3]="Textarea",e[e.Mobile=4]="Mobile",e[e.Fileupload=5]="Fileupload",e[e.Number=6]="Number",e[e.Date=7]="Date",e[e.Yes_No=8]="Yes_No",p;var e})(),b=s(9660),x=s.n(b),v=(s(6795),s(8260)),n=s(3556),A=s(2970),M=s(5117),T=s(6570),Z=s(2387),N=s(821);function w(e,c){if(1&e&&(n.ynx(0),n.TgZ(1,"li",7),n.TgZ(2,"a",8),n.TgZ(3,"span"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&e){const t=c.$implicit,_=c.index,i=n.oxw();n.xp6(2),n.ekj("active",i.tab_index==_),n.xp6(2),n.Oqu(_+1),n.xp6(2),n.Oqu(t.title)}}function O(e,c){if(1&e&&(n.TgZ(0,"p",16),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.title)}}function q(e,c){if(1&e&&(n.TgZ(0,"label"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2).$implicit;n.xp6(1),n.Oqu(t.title)}}function J(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",22),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i})("keypress",function(i){n.CHM(t);const o=n.oxw(2).$implicit;return n.oxw(4).onlyNumbers(i,o)}),n.qZA()}if(2&e){const t=n.oxw(2),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.s9C("placeholder",_.title),n.cQ8("name","field",r,"",o,"",i,""),n.Q6J("ngModel",_.value)("maxLength",_.type==a.field_types.Mobile?"10":"50")("disabled",a.disabled_inputs||6==_.id||8==_.id||100==_.id)}}function K(e,c){if(1&e&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function Q(e,c){if(1&e&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&e){const t=n.oxw(2).$implicit;n.xp6(1),n.Oqu(t.error_message)}}function k(e,c){if(1&e&&(n.TgZ(0,"div",18),n.YNc(1,q,2,1,"label",19),n.YNc(2,J,1,7,"input",20),n.YNc(3,K,2,1,"span",21),n.YNc(4,Q,2,1,"span",21),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","crName"!=t.title&&"businessType"!=t.title),n.xp6(1),n.Q6J("ngIf","crName"!=t.title&&"businessType"!=t.title),n.xp6(1),n.Q6J("ngIf",t.required&&"crName"!=t.title&&"businessType"!=t.title),n.xp6(1),n.Q6J("ngIf",t.invalid&&"crName"!=t.title&&"businessType"!=t.title)}}function I(e,c){if(1&e&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function P(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"div",18),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"input",24),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw().$implicit.value=i}),n.qZA(),n.YNc(4,I,2,1,"span",21),n.qZA()}if(2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.xp6(2),n.Oqu(_.title),n.xp6(1),n.s9C("placeholder",_.title),n.cQ8("name","field",r,"",o,"",i,""),n.Q6J("ngModel",_.value)("disabled",a.disabled_inputs),n.xp6(1),n.Q6J("ngIf",_.required)}}function Y(e,c){if(1&e&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function E(e,c){1&e&&n._UZ(0,"img",28)}function $(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"button",29),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2).$implicit;return n.oxw(4).verifyCrNumber(i.value)}),n._uU(1,"Verify"),n.qZA()}}function U(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"div",18),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"input",25),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw().$implicit.value=i}),n.qZA(),n.YNc(4,Y,2,1,"span",21),n.YNc(5,E,1,0,"img",26),n.YNc(6,$,2,0,"button",27),n.qZA()}if(2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.xp6(2),n.Oqu(_.title),n.xp6(1),n.s9C("placeholder",_.title),n.cQ8("name","field",r,"",o,"",i,""),n.Q6J("ngModel",_.value)("disabled",1==a.verfyimg),n.xp6(1),n.Q6J("ngIf",_.required),n.xp6(1),n.Q6J("ngIf",a.disabled_inputs),n.xp6(1),n.Q6J("ngIf",!a.disabled_inputs)}}function L(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(6).crname=i}),n.qZA()}if(2&e){const t=n.oxw(6);n.Q6J("ngModel",t.crname)}}function D(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i}),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("ngModel",t.value)}}function F(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(6).crEntityNumber=i}),n.qZA()}if(2&e){const t=n.oxw(6);n.Q6J("ngModel",t.crEntityNumber)}}function H(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i}),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("ngModel",t.value)}}function j(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(6).businessType=i}),n.qZA()}if(2&e){const t=n.oxw(6);n.Q6J("ngModel",t.businessType)}}function G(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i}),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("ngModel",t.value)}}function B(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(6).issueDate=i}),n.qZA()}if(2&e){const t=n.oxw(6);n.Q6J("ngModel",t.issueDate)}}function R(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i}),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("ngModel",t.value)}}function S(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(6).expiryDate=i}),n.qZA()}if(2&e){const t=n.oxw(6);n.Q6J("ngModel",t.expiryDate)}}function z(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"input",31),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw(2).$implicit.value=i}),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("ngModel",t.value)}}function W(e,c){if(1&e&&(n.TgZ(0,"div",18),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.YNc(3,L,1,1,"input",30),n.YNc(4,D,1,1,"input",30),n.YNc(5,F,1,1,"input",30),n.YNc(6,H,1,1,"input",30),n.YNc(7,j,1,1,"input",30),n.YNc(8,G,1,1,"input",30),n.YNc(9,B,1,1,"input",30),n.YNc(10,R,1,1,"input",30),n.YNc(11,S,1,1,"input",30),n.YNc(12,z,1,1,"input",30),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(2),n.Oqu(t.title),n.xp6(1),n.Q6J("ngIf",112==t.id&&null==t.value),n.xp6(1),n.Q6J("ngIf",112==t.id&&null!=t.value),n.xp6(1),n.Q6J("ngIf",113==t.id&&null==t.value),n.xp6(1),n.Q6J("ngIf",113==t.id&&null!=t.value),n.xp6(1),n.Q6J("ngIf",114==t.id&&null==t.value),n.xp6(1),n.Q6J("ngIf",114==t.id&&null!=t.value),n.xp6(1),n.Q6J("ngIf",115==t.id&&null==t.value),n.xp6(1),n.Q6J("ngIf",115==t.id&&null!=t.value),n.xp6(1),n.Q6J("ngIf",116==t.id&&null==t.value),n.xp6(1),n.Q6J("ngIf",116==t.id&&null!=t.value)}}function V(e,c){if(1&e&&(n.ynx(0),n.YNc(1,k,5,4,"div",17),n.YNc(2,P,5,8,"div",17),n.YNc(3,U,7,10,"div",17),n.YNc(4,W,13,11,"div",17),n.BQk()),2&e){const t=c.$implicit,_=n.oxw(4);n.xp6(1),n.Q6J("ngIf",t.type==_.field_types.Email||t.type==_.field_types.Mobile||t.type==_.field_types.Characters||t.type==_.field_types.Number&&112!=t.id&&113!=t.id&&114!=t.id&&115!=t.id&&116!=t.id&&74!=t.id),n.xp6(1),n.Q6J("ngIf",t.type==_.field_types.Date&&112!=t.id&&113!=t.id&&114!=t.id&&115!=t.id&&116!=t.id&&74!=t.id),n.xp6(1),n.Q6J("ngIf",74==t.id&&112!=t.id&&113!=t.id&&114!=t.id&&115!=t.id&&116!=t.id),n.xp6(1),n.Q6J("ngIf",112==t.id||113==t.id||114==t.id||115==t.id||116==t.id)}}function X(e,c){if(1&e&&n._UZ(0,"img",40),2&e){const t=n.oxw(3).$implicit;n.s9C("src",t.value,n.LSH)}}function nn(e,c){1&e&&n._UZ(0,"img",41)}function tn(e,c){1&e&&n._UZ(0,"img",42)}function en(e,c){if(1&e&&(n.ynx(0),n.TgZ(1,"div",43),n._UZ(2,"progress",44),n.qZA(),n.BQk()),2&e){const t=n.oxw(3).$implicit;n.xp6(2),n.Q6J("value",t.progress)}}function _n(e,c){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,X,1,1,"img",37),n.YNc(2,nn,1,0,"img",38),n.YNc(3,tn,1,0,"img",39),n.YNc(4,en,3,1,"ng-container",19),n.qZA()),2&e){const t=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf","pdf"!=t.ext&&"docx"!=t.ext),n.xp6(1),n.Q6J("ngIf","pdf"==t.ext),n.xp6(1),n.Q6J("ngIf","docx"==t.ext),n.xp6(1),n.Q6J("ngIf",t.progress&&100!==t.progress)}}function on(e,c){if(1&e&&(n.TgZ(0,"span",45),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function cn(e,c){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"h5"),n._uU(2),n.qZA(),n.TgZ(3,"div",32),n.TgZ(4,"input",33),n.NdJ("change",function(i){n.CHM(t);const o=n.oxw().$implicit;return n.oxw(4).changeImage(i,o)}),n.qZA(),n.YNc(5,_n,5,4,"span",19),n.TgZ(6,"span",34),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().index,o=n.oxw().index,r=n.oxw(2).index;return n.oxw().showFileInput(r,o,i)}),n._UZ(7,"i",35),n._uU(8),n.qZA(),n.qZA(),n.YNc(9,on,2,1,"span",36),n.BQk()}if(2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.xp6(2),n.AsE("",a.LANG.Upload_pictures_for," ",_.title,""),n.xp6(1),n.ekj("mb-0",_.required),n.xp6(1),n.cQ8("id","fileInput",r,"",o,"",i,""),n.Q6J("disabled",a.disabled_inputs),n.xp6(1),n.Q6J("ngIf",_.value),n.xp6(3),n.Oqu(a.LANG.Add_image),n.xp6(1),n.Q6J("ngIf",_.required)}}function an(e,c){if(1&e&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function rn(e,c){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"h5"),n._uU(2),n.qZA(),n.TgZ(3,"div",15),n.TgZ(4,"div",46),n.TgZ(5,"textarea",47),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw().$implicit.value=i}),n.qZA(),n.YNc(6,an,2,1,"span",21),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.xp6(2),n.AsE("",a.LANG.About," ",_.title,""),n.xp6(3),n.hYB("placeholder","",a.LANG.Tell_about_your," ",_.title,""),n.cQ8("name","textarea",r,"",o,"",i,""),n.Q6J("ngModel",_.value)("disabled",a.disabled_inputs),n.xp6(1),n.Q6J("ngIf",_.required)}}function sn(e,c){if(1&e&&(n.TgZ(0,"span",55),n._uU(1),n.qZA()),2&e){const t=n.oxw(6);n.xp6(1),n.Oqu(t.LANG.This_field_is_required)}}function dn(e,c){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"h5"),n._uU(2),n.qZA(),n.TgZ(3,"div",15),n.TgZ(4,"div"),n.TgZ(5,"div",48),n.TgZ(6,"div",49),n.TgZ(7,"input",50),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw().$implicit.value=i}),n.qZA(),n.TgZ(8,"label",51),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",52),n.TgZ(11,"input",53),n.NdJ("ngModelChange",function(i){return n.CHM(t),n.oxw().$implicit.value=i}),n.qZA(),n.TgZ(12,"label",51),n._uU(13),n.qZA(),n.qZA(),n.qZA(),n.YNc(14,sn,2,1,"span",54),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw().index,r=n.oxw(2).index,a=n.oxw();n.xp6(2),n.Oqu(_.title),n.xp6(5),n.cQ8("id","yes",r,"",o,"",i,""),n.cQ8("name","field",r,"",o,"",i,""),n.Q6J("checked",1==_.value)("ngModel",_.value)("disabled",a.disabled_inputs),n.xp6(1),n.cQ8("for","yes",r,"",o,"",i,""),n.xp6(1),n.Oqu(a.LANG.Yes),n.xp6(2),n.cQ8("id","no",r,"",o,"",i,""),n.cQ8("name","field",r,"",o,"",i,""),n.Q6J("checked",0==_.value)("ngModel",_.value)("disabled",a.disabled_inputs),n.xp6(1),n.cQ8("for","no",r,"",o,"",i,""),n.xp6(1),n.Oqu(a.LANG.No),n.xp6(1),n.Q6J("ngIf",_.required)}}function ln(e,c){if(1&e&&(n.ynx(0),n.YNc(1,cn,10,11,"ng-container",19),n.YNc(2,rn,7,10,"ng-container",19),n.YNc(3,dn,15,28,"ng-container",19),n.BQk()),2&e){const t=c.$implicit,_=n.oxw(4);n.xp6(1),n.Q6J("ngIf",t.type==_.field_types.Fileupload),n.xp6(1),n.Q6J("ngIf",t.type==_.field_types.Textarea),n.xp6(1),n.Q6J("ngIf",t.type==_.field_types.Yes_No)}}function gn(e,c){if(1&e&&(n.ynx(0),n.YNc(1,O,2,1,"p",14),n.TgZ(2,"div",15),n.YNc(3,V,5,4,"ng-container",3),n.qZA(),n.YNc(4,ln,4,3,"ng-container",3),n.BQk()),2&e){const t=c.$implicit;n.xp6(1),n.Q6J("ngIf",""!=t.detail.length),n.xp6(2),n.Q6J("ngForOf",t.detail),n.xp6(1),n.Q6J("ngForOf",t.detail)}}function pn(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"button",56),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2).index;return n.oxw().back(i)}),n._uU(1,"Back"),n.qZA()}}function un(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"button",57),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2).index;return n.oxw().next(i)}),n._uU(1,"Next"),n.qZA()}}function mn(e,c){if(1&e&&(n.TgZ(0,"div",10),n.TgZ(1,"h3"),n._uU(2),n.qZA(),n.YNc(3,gn,5,3,"ng-container",3),n.TgZ(4,"div",11),n.YNc(5,pn,2,0,"button",12),n.YNc(6,un,2,0,"button",13),n.qZA(),n.qZA()),2&e){const t=n.oxw(),_=t.$implicit,i=t.index,o=n.oxw();n.xp6(2),n.Oqu(_.title),n.xp6(1),n.Q6J("ngForOf",_.info_type),n.xp6(2),n.Q6J("ngIf",0!=i),n.xp6(1),n.Q6J("ngIf",i!=o.kyc_form.length-1)}}function fn(e,c){if(1&e&&(n.ynx(0),n.YNc(1,mn,7,4,"div",9),n.BQk()),2&e){const t=c.index,_=n.oxw();n.xp6(1),n.Q6J("ngIf",t==_.tab_index)}}function xn(e,c){1&e&&(n.ynx(0),n._UZ(1,"loader"),n.BQk())}function vn(e,c){if(1&e&&n._uU(0),2&e){const t=n.oxw(2);n.hij(" ",1!=t.type||t.disabled_inputs?t.LANG.SUBMIT:t.LANG.UPDATE," ")}}function hn(e,c){if(1&e){const t=n.EpF();n.TgZ(0,"div",58),n.TgZ(1,"div",59),n.TgZ(2,"button",60),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return i.addKYCDetails(i.kyc_form.length-1)}),n.YNc(3,xn,2,0,"ng-container",61),n.YNc(4,vn,1,1,"ng-template",null,62,n.W1O),n.qZA(),n.qZA(),n.qZA()}if(2&e){const t=n.MAs(5),_=n.oxw();n.xp6(2),n.ekj("loading",_.load),n.xp6(1),n.Q6J("ngIf",_.load)("ngIfElse",t)}}let h=(()=>{class e{constructor(t,_,i,o,r,a){this.campaign_service=t,this.shared=_,this.loginService=i,this.route=o,this.toast=r,this.router=a,this.err=!1,this.load=!1,this.kyc_form=[],this.field_types=p,this.subscriptions=[],this.data_loaded=!1,this.image_count=0,this.uploaded_count=0,this.post_data=[],this.upload_called=!1,this.user_data={},this.user_details={},this.disabled_inputs=!1,this.LANG={},this.tab_index=0,this.crname="",this.loader=!1,this.verfyimg=!1;const l=btoa(btoa("user_info_web"));null!=localStorage.getItem(l)&&(this.user_data=JSON.parse(atob(atob(localStorage.getItem(l)||"{}")))),"/kyc-details"==this.router.url&&(this.type=1),this.subscriptions.push(this.route.queryParams.subscribe(d=>{d.type&&(this.user_type=atob(atob(d.type)))})),this.subscriptions.push(this.shared.languageChange.subscribe(d=>{this.changeLanguage(),this.getUserKycList(),2!=this.user_data.role_type?this.getProfileDetails():this.getProfileDetails(1)})),this.changeLanguage()}ngOnInit(){this.getUserKycList(),2!=this.user_data.role_type?this.getProfileDetails():this.getProfileDetails(1)}changeLanguage(){this.LANG="true"==localStorage.getItem("arabic")&&null!=localStorage.getItem("arabic")?v.N.arabic_translations:v.N.english_translations}getProfileDetails(t){this.subscriptions.push(this.loginService.getProfileDetails({id:this.user_data.id},t).subscribe(i=>{i.status&&(this.loader=!0,this.user_details=i.response,1==i.response.kyc_approved_status&&(this.disabled_inputs=!0))}))}getUserKycList(){this.subscriptions.push(this.campaign_service.getUserKycList().subscribe(t=>{this.kyc_form=t.response,this.kyc_form.map(_=>{_.info_type.map(i=>{i.detail.map(o=>{var r,a,l;6==o.id&&(o.value=null===(r=this.user_data)||void 0===r?void 0:r.email),8==o.id&&(o.value=null===(a=this.user_data)||void 0===a?void 0:a.mobile_number),100==o.id&&(o.value=null===(l=this.user_data)||void 0===l?void 0:l.name)})})}),this.data_loaded=!0}))}showFileInput(t,_,i){document.getElementById("fileInput"+t+_+i).click()}changeImage(t,_){let i=t.target.files[0],o=i.type.split("/").pop().toLowerCase();if("jpeg"!==o&&"jpg"!==o&&"png"!==o&&"pdf"!==o&&"docx"!==i.name.split(".").pop())return this.toast.warning("",i.name+"is not a valid file"),!1;if(i){let r=new FileReader;r.onload=a=>{_.value=a.target.result,_.file=i,_.image_selected=!0,_.ext="docx"===i.name.split(".").pop()?"docx":o},r.readAsDataURL(i)}}uploadImage(t){var _=this;this.upload_called=!0;var i=Date.now();const a=`Kyc/${t.file.name+i}`;this.load=!0;const l=x().storage().ref().child(`${a}`).put(t.file);l.on(x().storage.TaskEvent.STATE_CHANGED,d=>{t.progress=d.bytesTransferred/d.totalBytes*100},d=>console.log(d),(0,y.Z)(function*(){yield l.snapshot.ref.getDownloadURL().then(d=>{t.value=d,_.uploaded_count+=1,_.image_count==_.uploaded_count&&_.add()})}))}onlyNumbers(t,_){if(_.type==this.field_types.Number||_.type==this.field_types.Mobile){var i=t.which?t.which:t.keyCode;if((i<48||i>57)&&13!==i||46==i)return t.preventDefault(),!1}}next(t){if(this.disabled_inputs)return this.tab_index=t+1,void window.scrollTo({top:0,behavior:"smooth"});this.addKYCDetails(t)}back(t){this.tab_index=t-1,window.scrollTo({top:0,behavior:"smooth"})}addKYCDetails(t){this.kyc_form[t].info_type.map(_=>{_.detail.map(i=>{112==i.id&&null==i.value&&(i.value=this.crname),113==i.id&&null==i.value&&(i.value=this.crEntityNumber),114==i.id&&null==i.value&&(i.value=this.businessType),115==i.id&&null==i.value&&(i.value=this.issueDate),116==i.id&&null==i.value&&(i.value=this.expiryDate)})}),this.tab_index==this.kyc_form.length-1&&this.kyc_form[t].info_type.map(_=>{_.detail.map(i=>{112==i.id&&null==i.value&&(i.value=this.crname),113==i.id&&null==i.value&&(i.value=this.crEntityNumber),114==i.id&&null==i.value&&(i.value=this.businessType),115==i.id&&null==i.value&&(i.value=this.issueDate),116==i.id&&null==i.value&&(i.value=this.expiryDate)})}),this.errorHandler(t),!this.err&&(this.tab_index==this.kyc_form.length-1?(this.load=!0,this.kyc_form.map(_=>{_.info_type.map(i=>{i.detail.map(o=>{if(o.image_selected)return this.uploadImage(o),void(this.image_count+=1)})})}),!this.err&&!this.upload_called&&this.add()):(this.tab_index=t+1,window.scrollTo({top:0,behavior:"smooth"})))}add(){null==this.verifyCR&&""==this.verifyCR||this.subscriptions.push(this.campaign_service.addKyc({field:this.post_data,crnumber:this.verifyCR}).subscribe(_=>{if(this.load=!1,_.status)return this.toast.success("Kyc added successfully!"),void this.router.navigate(["/dashboard"]);this.toast.warning(_.response.message)}))}errorHandler(t){this.err=!1,this.kyc_form[t].info_type.map(_=>{_.detail.map(i=>{1!=i.mandatory||i.value?i.required=!1:(i.required=!0,this.err=!0),i.type!=this.field_types.Mobile&&(i.value&&""!=i.length&&i.value.length>+i.length?(i.invalid=!0,i.error_message=`${this.LANG.value_cannot_exceed} ${i.length} ${this.LANG.characters}`,this.err=!0):i.invalid=!1),i.type==this.field_types.Mobile&&(i.value&&(i.value.length<9||i.value.length>10)?(i.invalid=!0,i.error_message=this.LANG.Enter_valid_Mobile_Number,this.err=!0):(i.invalid=!1,i.error_message="")),i.type==this.field_types.Email&&(i.value&&this.checkEmail(i.value)?(i.invalid=!0,i.error_message=this.LANG.Enter_valid_Email_Id,this.err=!0):(i.invalid=!1,i.error_message=""))}),this.err||this.post_data.push.apply(this.post_data,_.detail)})}checkEmail(t){return!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}verifyCrNumber(t){this.campaign_service.verifyCrNumber(t).subscribe(_=>{this.verifyCR=_.response,1==this.verifyCR.is_verified?(this.toast.success("verified"),this.crname=this.verifyCR.crName,this.crEntityNumber=this.verifyCR.crEntityNumber,this.issueDate=this.verifyCR.issueDate,this.expiryDate=this.verifyCR.expiryDate,this.businessType=this.verifyCR.businessType.name):this.toast.error("not veriied")})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(A.U),n.Y36(M.F),n.Y36(T.r),n.Y36(u.gz),n.Y36(Z._W),n.Y36(u.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-add-kyc"]],decls:9,vars:3,consts:[[1,"container-fluid","campaign"],[1,"col-md-5","mx-auto"],["role","tablist",1,"nav","nav-tabs","justify-content-center"],[4,"ngFor","ngForOf"],[1,"container"],[1,"container","bg-white","border-sec"],["class","row camp-button justify-content-center",4,"ngIf"],[1,"nav-item"],[1,"nav-link","step","verified"],["class","upload-sec",4,"ngIf"],[1,"upload-sec"],[1,"buttons"],["class","btn back",3,"click",4,"ngIf"],["class","btn next",3,"click",4,"ngIf"],["style","font-weight: 600;",4,"ngIf"],[1,"row","campaign-row"],[2,"font-weight","600"],["class","form-group col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],[4,"ngIf"],["type","text","class","form-control",3,"placeholder","name","ngModel","maxLength","disabled","ngModelChange","keypress",4,"ngIf"],["class","error",4,"ngIf"],["type","text",1,"form-control",3,"placeholder","name","ngModel","maxLength","disabled","ngModelChange","keypress"],[1,"error"],["type","date",1,"form-control",3,"placeholder","name","ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"placeholder","name","ngModel","disabled","ngModelChange"],["class","pos","src","../../../../assets/images/icons8-verified-account.gif","alt","",4,"ngIf"],["class","pointer btn btn-primary",3,"click",4,"ngIf"],["src","../../../../assets/images/icons8-verified-account.gif","alt","",1,"pos"],[1,"pointer","btn","btn-primary",3,"click"],["type","text","class","form-control","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"add-image"],["type","file",2,"display","none",3,"id","disabled","change"],[3,"click"],[1,"fa","fa-plus"],["class","error mt-2 mb-5",4,"ngIf"],["class","",3,"src",4,"ngIf"],["src","assets/images/pdf-logo.png","class","",4,"ngIf"],["src","assets/images/words-logo.png","class","",4,"ngIf"],[1,"",3,"src"],["src","assets/images/pdf-logo.png",1,""],["src","assets/images/words-logo.png",1,""],[1,"text-center","mt-2"],["max","100",3,"value"],[1,"error","mt-2","mb-5"],[1,"form-group","col-md-12"],[1,"form-control",3,"placeholder","name","ngModel","disabled","ngModelChange"],[1,"form-check"],[1,"radio-1"],["type","radio","value","1",1,"radio-buttons",3,"id","name","checked","ngModel","disabled","ngModelChange"],["name","gender",3,"for"],[1,"radio-2"],["type","radio","value","0",1,"radio-buttons",3,"id","name","checked","ngModel","disabled","ngModelChange"],["class","error pl-4",4,"ngIf"],[1,"error","pl-4"],[1,"btn","back",3,"click"],[1,"btn","next",3,"click"],[1,"row","camp-button","justify-content-center"],[1,"col-md-6","submit-button","text-center"],[1,"btn",3,"click"],[4,"ngIf","ngIfElse"],["noLoader",""]],template:function(t,_){1&t&&(n.TgZ(0,"div"),n.TgZ(1,"section",0),n.TgZ(2,"div",1),n.TgZ(3,"ul",2),n.YNc(4,w,7,4,"ng-container",3),n.qZA(),n.qZA(),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,fn,2,1,"ng-container",3),n.YNc(8,hn,6,4,"div",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(4),n.Q6J("ngForOf",_.kyc_form),n.xp6(3),n.Q6J("ngForOf",_.kyc_form),n.xp6(1),n.Q6J("ngIf",_.data_loaded&&!_.disabled_inputs&&_.tab_index==_.kyc_form.length-1))},directives:[m.sg,m.O5,g.Fj,g.JJ,g.On,g._,N.R],styles:['.border-sec[_ngcontent-%COMP%]{width:75%;padding-bottom:20px}.campaign[_ngcontent-%COMP%]   .upload-sec[_ngcontent-%COMP%]{padding:70px;position:relative}.campaign-tab[_ngcontent-%COMP%]{margin-top:107px}.campaign-tab[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#160034}.pointer[_ngcontent-%COMP%]{cursor:pointer}.campaign-tab[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-radius:0;font-size:14px;color:#fff;border:0;font-family:"maison-med";display:flex;justify-content:center;align-items:center;padding:20px 31px}.campaign-tab[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#F3F5F7;color:#310075}.campaign-tab[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:#F2F5F7;padding:80px 15px 145px}.pos[_ngcontent-%COMP%]{margin-top:-53px;padding-left:85%;height:28px}.campaign[_ngcontent-%COMP%]   .upload-sec[_ngcontent-%COMP%]:first-child{padding-top:40px}.campaign[_ngcontent-%COMP%]   .upload-sec[_ngcontent-%COMP%]{padding-bottom:20px;padding-top:0;margin-bottom:0}.upload-sec[_ngcontent-%COMP%]   .skip[_ngcontent-%COMP%]{position:absolute;right:0;top:10px}.upload-sec[_ngcontent-%COMP%]   .skip.link[_ngcontent-%COMP%]{left:0;right:auto}.upload-sec[_ngcontent-%COMP%]   .skip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00e;text-decoration:underline}.upload-sec[_ngcontent-%COMP%]   .skip[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:600}input[type=radio][_ngcontent-%COMP%]:checked, input[type=radio][_ngcontent-%COMP%]:not(:checked){display:none}@media only screen and (max-width:576px){.border-sec[_ngcontent-%COMP%]{width:100%}.campaign[_ngcontent-%COMP%]   .upload-sec[_ngcontent-%COMP%]{padding:0}.campaign[_ngcontent-%COMP%]{margin:84px 0 50px}.add-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;height:100px;margin-right:20px;border-radius:8px;font-size:12px}.add-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px}.campaign[_ngcontent-%COMP%]   .upload-sec[_ngcontent-%COMP%]{padding-bottom:0}.upload-sec[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:15px}.camp-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:45px;width:50%}.personal-info[_ngcontent-%COMP%]{text-align:center}}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-color:transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d0d0d;background-color:transparent;border-color:transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#525252}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:20px;border:0}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;padding:7px 26px}.buttons[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{background:red}.buttons[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{background:#00C48A}']}),e})();const Cn=[{path:"add-kyc",component:h},{path:"kyc-details",component:h}];let yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[u.Bz.forChild(Cn),g.u5,m.ez,C.q]]}),e})()}}]);